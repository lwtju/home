<?xml version="1.0" encoding="utf-8"?><feed xmlns="http://www.w3.org/2005/Atom" xml:lang="zh"><generator uri="https://jekyllrb.com/" version="3.7.3">Jekyll</generator><link href="http://10.143.186.162:4000/feed.xml" rel="self" type="application/atom+xml" /><link href="http://10.143.186.162:4000/" rel="alternate" type="text/html" hreflang="zh" /><updated>2018-03-20T13:47:45+08:00</updated><id>http://10.143.186.162:4000/</id><title type="html">三江的博客</title><subtitle>三江的博客，记录三江工作生活中的点滴
</subtitle><author><name>刘三江</name><email>liuwangv5@163.com</email></author><entry><title type="html">记一次Jenkins部署错误解决过程</title><link href="http://10.143.186.162:4000/2016/11/10/Jenkins-error.html" rel="alternate" type="text/html" title="记一次Jenkins部署错误解决过程" /><published>2016-11-10T00:00:00+08:00</published><updated>2016-11-10T00:00:00+08:00</updated><id>http://10.143.186.162:4000/2016/11/10/Jenkins-error</id><content type="html" xml:base="http://10.143.186.162:4000/2016/11/10/Jenkins-error.html">&lt;h2 id=&quot;问题表现&quot;&gt;问题表现&lt;/h2&gt;

&lt;p&gt;提示错误：RPC failed: result=18, HTTP code = 200&lt;/p&gt;

&lt;p&gt;此外还有一个表象，有的job能工作，有的job不能工作&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/assets/images/jenkins_error.png&quot; alt=&quot;jenkins_error&quot; title=&quot;问题表现截图&quot; /&gt;&lt;/p&gt;

&lt;h2 id=&quot;解决过程&quot;&gt;解决过程&lt;/h2&gt;

&lt;p&gt;1、最初以为是授信问题，尝试将https用户名密码登录方式改为ssh方式，无效，除了上面截图，未能在jenkins上找到其他日志&lt;/p&gt;

&lt;p&gt;2、然后查看git服务，开始被unicorn.stderr.log 的一个日志误导了，以为是内存不够&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/assets/images/uncorn_stderr_1.png&quot; alt=&quot;uncorn_stderr_1&quot; title=&quot;uncorn_stderr_1.log&quot; /&gt;&lt;/p&gt;

&lt;p&gt;然而这个错误并不是致命错误，然后又返回查看jenkins&lt;/p&gt;

&lt;p&gt;3、在jenkins的屏幕输出中发现了这条 fatal: The remote end hung up unexpectedly 这是远程断开了，应该先从宏观上查问题，jenkins和gitlab之间还有一层nginx，发现nginx里有个log&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/assets/images/jenkins_nginx_error_1.png&quot; alt=&quot;jenkins_nginx_error_1&quot; title=&quot;jenkins_nginx_error_1.log&quot; /&gt;&lt;/p&gt;

&lt;p&gt;upstream closed, 说明git服务多半超时了&lt;/p&gt;

&lt;p&gt;3、再次查看unicorn.stderr.log 发现了这条&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/assets/images/uncorn_stderr_2.png&quot; alt=&quot;uncorn_stderr_2&quot; title=&quot;uncorn_stderr_2.log&quot; /&gt;&lt;/p&gt;

&lt;p&gt;基本是配置问题了，打开unicorn.rb发现了这个时间设置 timeout 60
改成120，还是有错，改成240，成功执行&lt;/p&gt;

&lt;h2 id=&quot;总结&quot;&gt;总结&lt;/h2&gt;

&lt;p&gt;一开始解决问题很容易钻入某个错误细节，把数据走向经过的结构搞清，从宏观上查看中间log，更容易顺藤摸瓜&lt;/p&gt;</content><author><name>刘三江</name><email>liuwangv5@163.com</email></author><category term="Jenkins" /><summary type="html">问题表现 提示错误：RPC failed: result=18, HTTP code = 200 此外还有一个表象，有的job能工作，有的job不能工作 解决过程 1、最初以为是授信问题，尝试将https用户名密码登录方式改为ssh方式，无效，除了上面截图，未能在jenkins上找到其他日志 2、然后查看git服务，开始被unicorn.stderr.log 的一个日志误导了，以为是内存不够 然而这个错误并不是致命错误，然后又返回查看jenkins 3、在jenkins的屏幕输出中发现了这条 fatal: The remote end hung up unexpectedly 这是远程断开了，应该先从宏观上查问题，jenkins和gitlab之间还有一层nginx，发现nginx里有个log upstream closed, 说明git服务多半超时了 3、再次查看unicorn.stderr.log 发现了这条 基本是配置问题了，打开unicorn.rb发现了这个时间设置 timeout 60 改成120，还是有错，改成240，成功执行 总结 一开始解决问题很容易钻入某个错误细节，把数据走向经过的结构搞清，从宏观上查看中间log，更容易顺藤摸瓜</summary></entry></feed>